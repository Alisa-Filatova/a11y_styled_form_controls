<!doctype html>
<html lang="en" class="no-js">
	<head>
		<meta charset="utf-8">
		<title>
			Styled File Uploads
		</title>
		<meta name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<script>
			// remove no-js and add 'js' to the HTML
			document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
		</script>
		<link rel="stylesheet" href="../assets/css/--demo-only--.css">
		<link rel="stylesheet" href="../assets/css/--shared--.css">
		<link rel="stylesheet" href="../assets/css/file-upload.css">
	</head>
	<body>

		<div class="demo-wrap">

			<header class="demo-wrap__header">
				<p class="demo-wrap__header__title">
					Accessible Styled Form Controls
				</p>
				<nav>
					<a href="https://github.com/scottaohara/a11y_styled_form_controls">See source on GitHub</a>,
					<a href="/a11y_styled_form_controls">Index of styled form controls</a>
				</nav>
			</header>

			<main aria-label="content">
				<article class="demo">
					<header>
						<h1>Styled File Uploads</h1>
						<p>Last updated: <time>July 23, 2018</time></p>
						<p>
							Cross-browser styling for the native HTML file input type.
						</p>
					</header>

					<h2>
						Pattern Demo
					</h2>

					<label for="file_upload_n">
						Upload
						<input type="file" id="file_upload_n">
					</label>

					<hr>

					<div class="file-up" data-file-input>
						<label for="file_upload">
							<span class="file-up__label__text">
								Upload an Image
							</span>
							<input type="file" id="file_upload" accept=".jpg">
						</label>
					</div>


					<div class="file-up" data-file-input>
						<label for="file_upload_d">
							<span class="file-up__label__text">
								Disabled Upload
							</span>
							<input type="file" id="file_upload_d" disabled>
						</label>
					</div>


					<div class="file-up" data-file-input>
						<label for="file_upload_m">
							<span class="file-up__label__text">
								Multi-Upload
							</span>
							<input type="file" id="file_upload_m" multiple>
						</label>
					</div>

					<details style="margin-top: 1em;">
						<summary>Visual design note</summary>
						<div>
							<p>
								...
							</p>
						</div>
					</details>

					<section class="demo-details">
						<h3>
							Pattern Details
						</h3>

						<details open>
							<summary>Pattern Markup</summary>
								<pre><code>&lt;div class="file-up" data-file-input>
  &lt;label for="file_upload">
    &lt;span class="file-up__label__text">
      Upload
    &lt;/span>
    &lt;input type="file" id="file_upload">
  &lt;/label>
&lt;/div></code></pre>
						</details>

						<p>
							The baseline markup for this component is a <cod>div</cod> wrapper. Note that the <code>div</code> could be removed and the JavaScript adjust to account for that, but it can be nice to use a <code>div</code> or <code>p</code> as an outer wrapper to a form control, especially if you don't want to set your <code>label</code> to be <code>display: block</code>.
						</p>

						<p>
							Use appropriate labeling to match any native attributes used on the form control; such as <code>accept</code> or <code>multiple</code>.
						</p>

						<h4>The JavaScript</h4>

						<p>
							The containing <code>div[data-file-input]</code> provides the necessary selector hook for the JavaScript. An <code>input[type="file"]</code> can't be styled directly, due to what makes up this component living in the Shadow DOM. Access to the Shadow DOM is still not widely supported at this time. Instead the JavaScript creates a <code>span</code>, injects some classes, and listens for a change event to the file input.
						</p>

						<p>
							If using the <code>multiple</code> attribute, instead of the uploaded file name, the number of attached files will instead be visually printed on screen.
						</p>

						<p>
							If the form control should be set to <code>disabled</code>, the JavaScript will add a class to the wrapping element, to add a visual style to promote the disabled state. (The actual <code>input</code> is hidden, so it can't be relied on to visually convey state, but it will announce it's state to screen reader users that happen upon it, when navigating with the virtual cursor, for example.)
						</p>

						<h4>Affects on Screen Reader Announcements?</h4>
						<p>
							...
						</p>

					</section>
				</article>
			</main>
		</div> <!-- /.demo-wrap -->

		<script src="../assets/js/file-upload.js"></script>
		<script src="../assets/js/_global--focus-within.js"></script>
		<script>
			// some other file.js
			var selector = '[data-file-input]';
			var elList = document.querySelectorAll(selector);
			var i;

			for ( i = 0; i < elList.length; i++ ) {
				var a11yFUP = new A11yFileUpload();
				a11yFUP.init( elList[i] );
			};
		</script>
	</body>
</html>

